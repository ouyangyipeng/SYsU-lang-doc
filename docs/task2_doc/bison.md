# 使用bison完成实验二
以复活版本的为例.


# bison介绍
flex和bison进行配合使用，可以完成词法分析和语法分析。

输入一个文件，flex可以对该文件进行正则表达式的匹配，从而生成一系列的token流（这个大家在实验一中已经很清楚了）。

而lex生成每一个token之后，将其传给bison进行处理：bison会对当前传入的token进行语法分析，即文法的匹配，并进行相应移进归约操作，从而完成语法分析。

同时，我们可以在bison进行移进归约操作的时候，进行自定义语义动作，从而可以完成语法分析。

bison的使用方式很简单，同学们可以看下述链接？

# ASG（抽象语法图）
相比起AST抽象语法树，在本实验中使用ASG抽象语法图更为恰当和合适（类似于AST，只是其的一种简化or变体，更能将其方便的json的转化和输出）。
同学们可以看下述链接？

## 总体思路
以main.cpp为入口，实验2首先进行语法分析：`yyparse`（在其中进行填充ASG的结构），然后进行类型检查`typing(*par::gTranslationUnit)`，最后进行生成


实验2以复活版本的进行实验，输入的task1-answer，同学们可以看下其中的一个文件：？。

![task1-answer](../images/bison/task1-answer.png)

因此将其输入到实验2中，此时词法分析lex相关部分代码比起实验一会发生变化，不过这一部分的代码目前已经写好了，同学们可以自行查看。
大致逻辑是：相比于实验一的输入直接是源文件从而进行相关的各个token的匹配，实验二复活版本将匹配上述输入文件的每一行，然后对每一行进行处理，提取出每行的第一个单词（tokenId）和每行的第二个单词中的引号内容（tokenValue）。例如，以一行为例，识别处的token，其tokenId为int，其tokenValue为引号内的内容，也为int。

而后lex将识别到的token传给bison，bison则会进行语法分析，详细见par.y文件。



## 文件结构说明


## 代码说明和解析



### 以一个文法为例子说明



## 如何debug
### 断点
有些情况不适用

### 日志文件进行输出
更能进行问题定位





## 可能会遇到的坑点

### 指针问题